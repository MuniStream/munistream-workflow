# H5 Multi-tenant Environment Variables for MuniStream Workflow API
# These variables are injected by the CI/CD pipeline based on the target environment

# Database URLs - Aurora PostgreSQL 17 (dynamically replaced by CI/CD)
DATABASE_URL_CORE=postgresql://postgres:${DB_PASSWORD}@${AURORA_ENDPOINT}:5432/munistream_core
DATABASE_URL_CONAPESCA=postgresql://postgres:${DB_PASSWORD}@${AURORA_ENDPOINT}:5432/munistream_conapesca
DATABASE_URL_TESO=postgresql://postgres:${DB_PASSWORD}@${AURORA_ENDPOINT}:5432/munistream_tesoreriacdmx

# Aurora Database Connection (injected by CI/CD)
AURORA_ENDPOINT=munistream-dev-cluster.cluster-ckf4usc8u21l.us-east-1.rds.amazonaws.com
DB_PASSWORD=${DB_PASSWORD}

# Environment Configuration
APP_ENV=development
DEPLOYMENT_TARGET=h5-workflow-ec2
LOG_LEVEL=debug

# Client-specific configurations
CORE_DOMAIN=core-dev.munistream.local
CONAPESCA_DOMAIN=conapesca-dev.munistream.local
TESO_DOMAIN=tesoreriacdmx-dev.munistream.local

# API Ports per Client
API_CORE_PORT=8000
API_CONAPESCA_PORT=8001
API_TESO_PORT=8002

# Keycloak Endpoints (internal container communication)
KEYCLOAK_CORE_URL=http://localhost:9000
KEYCLOAK_CONAPESCA_URL=http://localhost:9001
KEYCLOAK_TESO_URL=http://localhost:9002

# Secret Keys per Client (for JWT and encryption)
SECRET_KEY_CORE=munistream-core-secret-key-dev-h5-2024
SECRET_KEY_CONAPESCA=munistream-conapesca-secret-key-dev-h5-2024
SECRET_KEY_TESO=munistream-teso-secret-key-dev-h5-2024

# Keycloak Client Secrets (injected by CI/CD from SSM)
KEYCLOAK_CLIENT_SECRET_CORE=${KEYCLOAK_CLIENT_SECRET_CORE}
KEYCLOAK_CLIENT_SECRET_CONAPESCA=${KEYCLOAK_CLIENT_SECRET_CONAPESCA}
KEYCLOAK_CLIENT_SECRET_TESO=${KEYCLOAK_CLIENT_SECRET_TESO}

# Shared Services
REDIS_URL=redis://localhost:6379

# Workflow API specific settings
UPLOAD_PATH=/app/uploads
MAX_FILE_SIZE=10MB
ALLOWED_EXTENSIONS=pdf,doc,docx,xls,xlsx,jpg,jpeg,png

# Multi-tenant workflow configuration
TENANT_CORE_WORKFLOWS_PATH=/app/workflows/core
TENANT_CONAPESCA_WORKFLOWS_PATH=/app/workflows/conapesca
TENANT_TESO_WORKFLOWS_PATH=/app/workflows/tesoreriacdmx

# External integrations per client
WEBHOOK_CORE_URL=https://core-dev.munistream.local/webhooks
WEBHOOK_CONAPESCA_URL=https://conapesca-dev.munistream.local/webhooks
WEBHOOK_TESO_URL=https://tesoreriacdmx-dev.munistream.local/webhooks